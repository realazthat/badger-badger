{"mappings":"AACA,oBAAA;AACA,qBAAA,GACA,gBAAA,GAEA,SAASA,YAAa,EAAEC,CAAC,EAAEC,CAAC,EAAEC,MAAM,EAAEC,GAAAA,EAAK;IACzC,sCAAA;IACAA,IAAIC,wBAAwB,GAAG;IAC/BD,IAAIE,SAAS;IACbF,IAAIG,GAAG,CAACN,GAAGC,GAAGC,QAAQ,GAAG,IAAIK,KAAKC,EAAE;IACpCL,IAAIM,IAAI;IACRN,IAAIC,wBAAwB,GAAG;AACjC;AAEA,SAASM,WAAY,EAAEV,CAAC,EAAEC,CAAC,EAAEC,MAAM,EAAES,KAAK,EAAER,GAAAA,EAAK;IAC/CA,IAAIS,SAAS,GAAGD;IAChBR,IAAIE,SAAS;IACbF,IAAIG,GAAG,CAACN,GAAGC,GAAGC,QAAQ,GAAG,IAAIK,KAAKC,EAAE;IACpCL,IAAIM,IAAI;AACV;AAEAI,SAASC,cAAc,CAAC,sBAAsBC,gBAAgB,CAAC,UAAU,SAAUC,CAAC;IAClF,MAAMC,SAAS,IAAIC;IACnBD,OAAOE,MAAM,GAAG,SAAUC,KAAK;QAC7B,MAAMC,MAAM,IAAIC;QAChBD,IAAIF,MAAM,GAAG;YACX,MAAMI,SAASV,SAASC,cAAc,CAAC;YACvC,MAAMX,IAAI,6BAAA,MAAiCoB,OAAOC,UAAU,CAAC;YAC7DD,OAAOE,KAAK,GAAGJ,IAAII,KAAK;YACxBF,OAAOG,MAAM,GAAGL,IAAIK,MAAM;YAC1BvB,IAAIwB,WAAW,GAAG;YAClBxB,IAAIyB,SAAS,CAACP,KAAK,GAAG;YAEtBE,OAAOM,KAAK,CAACC,OAAO,GAAG;QACzB;QACAT,IAAIU,GAAG,GAAGX,MAAMY,MAAM,CAACC,MAAM;IAC/B;IACAhB,OAAOiB,aAAa,CAAClB,EAAEgB,MAAM,CAACG,KAAK,CAAC,EAAE;AACxC;AAEA,SAASC,UAAW,EAAEb,MAAM,EAAEF,GAAAA,EAAK;IACjC,MAAMlB,IAAI,6BAAA,MAAiCoB,OAAOC,UAAU,CAAC;IAC7DD,OAAOE,KAAK,GAAGJ,IAAII,KAAK;IACxBF,OAAOG,MAAM,GAAGL,IAAIK,MAAM;IAC1BvB,IAAIyB,SAAS,CAACP,KAAK,GAAG;IAEtB,MAAMgB,YAAYhB,IAAII,KAAK;IAC3B,MAAMa,eAAeA,CAAC,EAAEC,CAAC,EAAEC,CAAAA,EAAG,GAAM,CAAA;YAAExC,GAAGuC,IAAIF;YAAWpC,GAAGuC,IAAIH;QAAU,CAAA;IACzE,MAAMI,cAAcA,CAAC,EAAEF,CAAAA,EAAG,GAAKA,IAAIF;IAEnC,MAAMK,iBAAiB;QAAEH,GAAG,IAAI,QAAQ;QAAKC,GAAG,IAAI,KAAK;IAAI;IAC7D,MAAMG,iBAAiBL,aAAaI;IACpC,MAAME,mBAAmB,KAAK;IAC9B,MAAMC,mBAAmB;IACzB,MAAMC,mBAAmBL,YAAY;QAAEF,GAAGK;IAAiB;IAC3D,MAAMG,mBAAmBN,YAAY;QAAEF,GAAGM;IAAiB;IAE3DG,QAAQC,GAAG,CAAC,mBAAmBN;IAC/BK,QAAQC,GAAG,CAAC,qBAAqBH;IACjCE,QAAQC,GAAG,CAAC,qBAAqBF;IAEjChD,YAAY;QAAEC,GAAG2C,eAAe3C,CAAC;QAAEC,GAAG0C,eAAe1C,CAAC;QAAEC,QAAQ6C;QAAkB5C;IAAI;IACtFO,WAAW;QAAEV,GAAG2C,eAAe3C,CAAC;QAAEC,GAAG0C,eAAe1C,CAAC;QAAEC,QAAQ4C;QAAkBnC,OAAO;QAAOR;IAAI;IAEnG,2BAAA;IACA,MAAM+C,aAAa3C,KAAK4C,KAAK,CAAC,KAAK,MAAMd;IACzClC,IAAIS,SAAS,GAAG;IAChB,sCAAA;IACAT,IAAIiD,IAAI,GAAI,CAAA,IAAA,EAAMF,WAAW,yEAAA,CAA0E;IACvG/C,IAAIkD,QAAQ,CAAC,KAAKV,eAAe3C,CAAC,GAAGkD,aAAa,GAAGP,eAAe1C,CAAC,GAAGiD,aAAa;IACrF3B,OAAOM,KAAK,CAACC,OAAO,GAAG;AACzB;AAEAjB,SAASC,cAAc,CAAC,eAAeC,gBAAgB,CAAC,UAAU,SAAUC,CAAC;IAC3E,MAAMC,SAAS,IAAIC;IACnBD,OAAOE,MAAM,GAAG,SAAUC,KAAK;QAC7B,MAAMC,MAAM,IAAIC;QAChBD,IAAIF,MAAM,GAAG;YACX,MAAMI,SAASV,SAASC,cAAc,CAAC;YACvCsB,UAAU;gBAAEb;gBAAQF;YAAI;QAC1B;QACAA,IAAIU,GAAG,GAAGX,MAAMY,MAAM,CAACC,MAAM;IAC/B;IACAhB,OAAOiB,aAAa,CAAClB,EAAEgB,MAAM,CAACG,KAAK,CAAC,EAAE;AACxC;AAEAtB,SAASC,cAAc,CAAC,iBAAiBC,gBAAgB,CAAC,SAAS,SAAUC,CAAC;IAC5E,MAAMO,SAASV,SAASC,cAAc,CAAC;IACvC,MAAMwC,QAAQ/B,OAAOgC,SAAS,CAAC,aAAaC,OAAO,CAAC,aAAa;IACjE,MAAMC,OAAO5C,SAAS6C,aAAa,CAAC;IACpCD,KAAKE,QAAQ,GAAG;IAChBF,KAAKG,IAAI,GAAGN;IACZG,KAAKI,KAAK;AACZ","sources":["app.js"],"sourcesContent":["\n// For semistandard.\n/* global FileReader */\n/* global Image */\n\nfunction ClearCircle ({ x, y, radius, ctx }) {\n  // ctx.fillStyle = 'rgba(0, 0, 0, 0)';\n  ctx.globalCompositeOperation = 'destination-out';\n  ctx.beginPath();\n  ctx.arc(x, y, radius, 0, 2 * Math.PI);\n  ctx.fill();\n  ctx.globalCompositeOperation = 'source-over';\n}\n\nfunction FillCircle ({ x, y, radius, color, ctx }) {\n  ctx.fillStyle = color;\n  ctx.beginPath();\n  ctx.arc(x, y, radius, 0, 2 * Math.PI);\n  ctx.fill();\n}\n\ndocument.getElementById('uploadImageOverlay').addEventListener('change', function (e) {\n  const reader = new FileReader();\n  reader.onload = function (event) {\n    const img = new Image();\n    img.onload = function () {\n      const canvas = document.getElementById('canvas-overlay');\n      const ctx /*: CanvasRenderingContext2D */= canvas.getContext('2d');\n      canvas.width = img.width;\n      canvas.height = img.height;\n      ctx.globalAlpha = 0.5;\n      ctx.drawImage(img, 0, 0);\n\n      canvas.style.display = 'block';\n    };\n    img.src = event.target.result;\n  };\n  reader.readAsDataURL(e.target.files[0]);\n});\n\nfunction DrawImage ({ canvas, img }) {\n  const ctx /*: CanvasRenderingContext2D */= canvas.getContext('2d');\n  canvas.width = img.width;\n  canvas.height = img.height;\n  ctx.drawImage(img, 0, 0);\n\n  const imageSize = img.width;\n  const UVToImgSpace = ({ u, v }) => ({ x: u * imageSize, y: v * imageSize });\n  const UToImgSpace = ({ u }) => u * imageSize;\n\n  const circleCenterUV = { u: 1 - 21.25 / 128, v: 1 - 21 / 128 };\n  const circleCenterXY = UVToImgSpace(circleCenterUV);\n  const lilCircleRadiusU = 21 / 128;\n  const bigCircleRadiusU = 32 / 128;\n  const lilCircleRadiusX = UToImgSpace({ u: lilCircleRadiusU });\n  const bigCircleRadiusX = UToImgSpace({ u: bigCircleRadiusU });\n\n  console.log('circleCenterXY:', circleCenterXY);\n  console.log('lilCircleRadiusX:', lilCircleRadiusX);\n  console.log('bigCircleRadiusX:', bigCircleRadiusX);\n\n  ClearCircle({ x: circleCenterXY.x, y: circleCenterXY.y, radius: bigCircleRadiusX, ctx });\n  FillCircle({ x: circleCenterXY.x, y: circleCenterXY.y, radius: lilCircleRadiusX, color: 'red', ctx });\n\n  // Add number to the badge,\n  const textSizePX = Math.round(30 / 128 * imageSize);\n  ctx.fillStyle = 'white';\n  // ctx.font = `${textSizePX}px Arial`;\n  ctx.font = `700 ${textSizePX}px \"gg sans\", \"Noto Sans\", \"Helvetica Neue\", Helvetica, Arial, sans-serif`;\n  ctx.fillText('1', circleCenterXY.x - textSizePX / 3, circleCenterXY.y + textSizePX / 3);\n  canvas.style.display = 'block';\n}\n\ndocument.getElementById('uploadImage').addEventListener('change', function (e) {\n  const reader = new FileReader();\n  reader.onload = function (event) {\n    const img = new Image();\n    img.onload = function () {\n      const canvas = document.getElementById('canvas');\n      DrawImage({ canvas, img });\n    };\n    img.src = event.target.result;\n  };\n  reader.readAsDataURL(e.target.files[0]);\n});\n\ndocument.getElementById('downloadImage').addEventListener('click', function (e) {\n  const canvas = document.getElementById('canvas');\n  const image = canvas.toDataURL('image/png').replace('image/png', 'image/octet-stream');\n  const link = document.createElement('a');\n  link.download = 'discord-pfp.png';\n  link.href = image;\n  link.click();\n});\n"],"names":["ClearCircle","x","y","radius","ctx","globalCompositeOperation","beginPath","arc","Math","PI","fill","FillCircle","color","fillStyle","document","getElementById","addEventListener","e","reader","FileReader","onload","event","img","Image","canvas","getContext","width","height","globalAlpha","drawImage","style","display","src","target","result","readAsDataURL","files","DrawImage","imageSize","UVToImgSpace","u","v","UToImgSpace","circleCenterUV","circleCenterXY","lilCircleRadiusU","bigCircleRadiusU","lilCircleRadiusX","bigCircleRadiusX","console","log","textSizePX","round","font","fillText","image","toDataURL","replace","link","createElement","download","href","click"],"version":3,"file":"index.7c0ccee6.js.map","sourceRoot":"/__parcel_source_root/"}
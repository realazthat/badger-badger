function e({svg:e}){for(;e.firstChild;)e.removeChild(e.firstChild)}async function t(e){return new Promise((t,i)=>{let a=()=>{let i=document.createElement("canvas");i.width=e.width,i.height=e.height,i.getContext("2d").drawImage(e,0,0,i.width,i.height),i.toBlob(e=>{t(e)},"image/png"),e.removeEventListener("load",a),e.removeEventListener("error",n)},n=t=>{i(t),e.removeEventListener("load",a),e.removeEventListener("error",n)};e.complete&&0!==e.naturalHeight?a():(e.addEventListener("load",a),e.addEventListener("error",n))})}for(const t of(window.badgerState=new class{constructor(){this.mainImage=new Image,this.overlayImage=new Image,this._outlineRoundness=0,this._u=0,this._v=0,this._normalizedRadius=0,this._normalizedBorder=0,this._badgeText="1",this._normalizedFontSize=0,this._uTextOffset=0,this._vTextOffset=0,this.dirty=!1}GetImageWH(){return{w:this.mainImage.width,h:this.mainImage.height}}_RedrawEverything(){let t=document.getElementById("canvas");t.style.display="block",function({canvas:e,img:t,imgSize:i,u:a,v:n,radiusU:d,borderU:r,fontSizeU:o,offsetU:s,offsetV:l}){let g=e.getContext("2d");e.width=i,e.height=i,g.drawImage(t,0,0),function({x:e,y:t,radius:i,ctx:a}){a.globalCompositeOperation="destination-out",a.beginPath(),a.arc(e,t,i,0,2*Math.PI),a.fill(),a.globalCompositeOperation="source-over"}({x:a*i,y:n*i,radius:(d+r)*i,ctx:g}),function({x:e,y:t,radius:i,color:a,ctx:n}){console.log(`FillCircle().x: ${e}, y: ${t}, radius: ${i}, color: ${a}`),n.fillStyle=a,n.beginPath(),n.arc(e,t,i,0,2*Math.PI),n.fill()}({x:a*i,y:n*i,radius:d*i,color:"red",ctx:g}),g.fillStyle="white",g.font=`700 ${o*i}px "gg sans", "Noto Sans", "Helvetica Neue", Helvetica, Arial, sans-serif`;let u=document.getElementById("badge-text").value,m=g.measureText(u);m.width,m.actualBoundingBoxAscent,m.actualBoundingBoxDescent,g.textAlign="center",g.textBaseline="middle";let w=a*i;w+=s*i;let c=n*i;c+=l*i,g.fillText(u,w,c),e.style.display="block"}({canvas:t,img:this.mainImage,imgSize:this.mainImage.width,u:this.u,v:this.v,fontSizeU:this.normalizedFontSize,offsetU:this.uTextOffset,offsetV:this.vTextOffset,radiusU:this.normalizedRadius,borderU:this.normalizedBorder});let i=document.getElementById("canvas-overlay");i.style.display="block",function({canvas:e,img:t}){let i=e.getContext("2d");e.width=t.width,e.height=t.height,i.globalAlpha=.5,i.drawImage(t,0,0,e.width,e.height),e.style.display="block"}({canvas:i,img:this.overlayImage}),function({canvas:e,imgSize:t,alpha:i,roundness:a}){let n=e.getContext("2d");e.width=t,e.height=t,n.fillStyle=`rgba(54, 57, 63, ${i})`,n.fillRect(0,0,t,t),n.globalCompositeOperation="destination-out";let d=t/2*a;1===a?(n.beginPath(),n.arc(t/2,t/2,d,0,2*Math.PI)):(n.beginPath(),n.moveTo(d,0),n.lineTo(t-d,0),n.arc(t-d,d,d,1.5*Math.PI,2*Math.PI),n.lineTo(t,t-d),n.arc(t-d,t-d,d,0,.5*Math.PI),n.lineTo(d,t),n.arc(d,t-d,d,.5*Math.PI,Math.PI),n.lineTo(0,d),n.arc(d,d,d,Math.PI,1.5*Math.PI),n.closePath()),n.fillStyle="rgba(255, 255, 255, 1)",n.fill(),n.globalCompositeOperation="source-over",e.style.display="block"}({canvas:i,imgSize:this.mainImage.width,alpha:.5,roundness:this.outlineRoundness});let a=document.getElementById("svg");a.style.display="block",a.setAttribute("width",256),a.setAttribute("height",256),e({svg:a}),function({svg:e,svgSize:t,img:i,u:a,v:n,fontSizeU:d,offsetU:r,offsetV:o,radius:s,border:l}){let g=document.createElementNS("http://www.w3.org/2000/svg","mask");g.setAttribute("id","image-mask");let u=document.createElementNS("http://www.w3.org/2000/svg","rect");u.setAttribute("x","0"),u.setAttribute("y","0"),u.setAttribute("width","100%"),u.setAttribute("height","100%"),u.setAttribute("fill","white"),g.appendChild(u);let m=document.createElementNS("http://www.w3.org/2000/svg","circle");m.setAttribute("cx",a*t),m.setAttribute("cy",n*t),m.setAttribute("r",(s+l)*t),m.setAttribute("fill","black"),g.appendChild(m),e.appendChild(g);let w=document.createElementNS("http://www.w3.org/2000/svg","image");w.setAttribute("x","0"),w.setAttribute("y","0"),w.setAttribute("width","100%"),w.setAttribute("height","100%"),w.setAttribute("href",i.src),w.setAttribute("mask","url(#image-mask)"),e.appendChild(w);let c=document.createElementNS("http://www.w3.org/2000/svg","circle");c.setAttribute("cx",a*t),c.setAttribute("cy",n*t),c.setAttribute("r",s*t),c.setAttribute("fill","red"),e.appendChild(c);let h=document.getElementById("badge-text").value,b=n*t+o*t;b+=s/2*t;let f=document.createElementNS("http://www.w3.org/2000/svg","text");f.setAttribute("x",a*t+r*t),f.setAttribute("y",b),f.setAttribute("fill","white"),f.setAttribute("text-anchor","middle"),f.setAttribute("vertical-align","middle"),f.setAttribute("font-size",`${d*t}px`),f.setAttribute("font-weight","700"),f.setAttribute("font-family",'"gg sans", "Noto Sans", "Helvetica Neue", Helvetica, Arial, sans-serif'),f.textContent=h,e.appendChild(f),e.style.display="block"}({svg:a,svgSize:256,img:this.mainImage,u:this.u,v:this.v,fontSizeU:this.normalizedFontSize,offsetU:this.uTextOffset,offsetV:this.vTextOffset,radius:this.normalizedRadius,border:this.normalizedBorder});let n=document.getElementById("svg-overlay");n.style.display="block",e({svg:n}),function({svg:e,img:t,alpha:i}){let a=document.createElementNS("http://www.w3.org/2000/svg","image");a.setAttribute("x","0"),a.setAttribute("y","0"),a.setAttribute("width","100%"),a.setAttribute("height","100%"),a.setAttribute("href",t.src),a.setAttribute("opacity",i),e.appendChild(a)}({svg:n,img:this.overlayImage,alpha:.5}),function({svg:e,svgSize:t,alpha:i,roundness:a}){let n=document.createElementNS("http://www.w3.org/2000/svg","mask");n.setAttribute("id","outline-overlay-image-mask");let d=document.createElementNS("http://www.w3.org/2000/svg","rect");d.setAttribute("x","0"),d.setAttribute("y","0"),d.setAttribute("width","100%"),d.setAttribute("height","100%"),d.setAttribute("fill","white"),n.appendChild(d);let r=document.createElementNS("http://www.w3.org/2000/svg","rect");r.setAttribute("x","0"),r.setAttribute("y","0"),r.setAttribute("width","100%"),r.setAttribute("height","100%"),r.setAttribute("fill","black"),r.setAttribute("rx",`${a*t/2}px`),r.setAttribute("ry",`${a*t/2}px`),n.appendChild(r),e.appendChild(n);let o=document.createElementNS("http://www.w3.org/2000/svg","rect");o.setAttribute("x","0"),o.setAttribute("y","0"),o.setAttribute("opacity",i),o.setAttribute("width","100%"),o.setAttribute("height","100%"),o.setAttribute("fill","rgba(54, 57, 63)"),o.setAttribute("mask","url(#outline-overlay-image-mask)"),e.appendChild(o)}({svg:n,svgSize:256,alpha:.5,roundness:this.outlineRoundness}),console.log(`_RedrawEverything().x: ${this.x}, y: ${this.y}, u: ${this.u}, v: ${this.v}`);let d=this.mainImage;function r(e,t){0===d.width?(document.getElementById(e).value="0",document.getElementById(e).disabled=!0):(document.getElementById(e).value=t,document.getElementById(e).disabled=!1)}document.getElementById("outline-overlay-roundness").value=this.outlineRoundness,r("x",this.x),r("y",this.y),document.getElementById("u").value=this.u,document.getElementById("v").value=this.v,document.getElementById("normalized-radius").value=this.normalizedRadius,document.getElementById("normalized-border").value=this.normalizedBorder,r("pixel-radius",this.pixelRadius),r("pixel-border",this.pixelBorder),document.getElementById("badge-text").value=this.badgeText,document.getElementById("normalized-font-size").value=this.normalizedFontSize,document.getElementById("normalized-offset-u").value=this.uTextOffset,document.getElementById("normalized-offset-v").value=this.vTextOffset,r("pixel-font-size",this.pixelFontSize),r("pixel-offset-x",this.xTextOffset),r("pixel-offset-y",this.yTextOffset),console.log(this)}MarkDirty(){this.dirty||(this.dirty=!0,this.u=1*this.u,this.v=1*this.v,this.normalizedRadius=1*this.normalizedRadius,this.normalizedBorder=1*this.normalizedBorder,setTimeout(()=>{this._RedrawEverything(),this.dirty=!1},0))}set x(e){this._u=e/this.GetImageWH().w}get x(){return this._u*this.GetImageWH().w}set y(e){this._v=e/this.GetImageWH().h}get y(){return this._v*this.GetImageWH().h}set u(e){this._u=e}get u(){return this._u}set v(e){this._v=e}get v(){return this._v}set pixelRadius(e){this._normalizedRadius=e/this.GetImageWH().w}get pixelRadius(){return this._normalizedRadius*this.GetImageWH().w}set normalizedRadius(e){this._normalizedRadius=e}get normalizedRadius(){return this._normalizedRadius}set pixelBorder(e){this._normalizedBorder=e/this.GetImageWH().w}get pixelBorder(){return this._normalizedBorder*this.GetImageWH().w}set normalizedBorder(e){this._normalizedBorder=e}get normalizedBorder(){return this._normalizedBorder}set badgeText(e){this._badgeText=e}get badgeText(){return this._badgeText}set normalizedFontSize(e){this._normalizedFontSize=e}get normalizedFontSize(){return this._normalizedFontSize}set pixelFontSize(e){this._normalizedFontSize=e/this.GetImageWH().w}get pixelFontSize(){return this._normalizedFontSize*this.GetImageWH().w}set uTextOffset(e){this._uTextOffset=e}get uTextOffset(){return this._uTextOffset}set xTextOffset(e){this._uTextOffset=e/this.GetImageWH().w}get xTextOffset(){return this._uTextOffset*this.GetImageWH().w}set vTextOffset(e){this._vTextOffset=e}get vTextOffset(){return this._vTextOffset}set yTextOffset(e){this._vTextOffset=e/this.GetImageWH().h}get yTextOffset(){return this._vTextOffset*this.GetImageWH().h}set outlineRoundness(e){this._outlineRoundness=e}get outlineRoundness(){return this._outlineRoundness}},document.getElementById("upload-image").addEventListener("change",function(e){let t=new FileReader;t.onload=function(e){window.badgerState.mainImage.onload=function(){window.badgerState.MarkDirty()},window.badgerState.mainImage.src=e.target.result},t.readAsDataURL(e.target.files[0])}),document.getElementById("upload-image-overlay").addEventListener("change",function(e){let t=new FileReader;t.onload=function(e){window.badgerState.overlayImage.onload=function(){window.badgerState.MarkDirty()},window.badgerState.overlayImage.src=e.target.result},t.readAsDataURL(e.target.files[0])}),document.getElementById("sample-server-pfp").addEventListener("onload",function(e){window.badgerState.mainImage.onload=function(){window.badgerState.MarkDirty()},window.badgerState.mainImage.src=e.target.src}),document.getElementById("sample-server-pfp").addEventListener("onload",function(e){window.badgerState.mainImage.onload=function(){window.badgerState.MarkDirty()},window.badgerState.mainImage.src=e.target.src}),document.getElementById("download-image").addEventListener("click",function(e){let t=document.getElementById("canvas").toDataURL("image/png").replace("image/png","image/octet-stream"),i=document.createElement("a");i.download="badger-badger-pfp.png",i.href=t,i.click()}),document.getElementById("download-svg").addEventListener("click",function(e){let t=document.getElementById("svg"),i=new XMLSerializer().serializeToString(t),a=new Blob([i],{type:"image/svg+xml"}),n=URL.createObjectURL(a),d=document.createElement("a");d.download="badger-badger-pfp.svg",d.href=n,d.click(),URL.revokeObjectURL(n)}),document.getElementById("download-svg-as-png").addEventListener("click",function(e){let t=document.getElementById("svg"),i=new XMLSerializer().serializeToString(t),a=document.createElement("canvas");a.width=256,a.height=256;let n=a.getContext("2d"),d=new Image;d.onload=function(){n.drawImage(d,0,0,a.width,a.height);let e=a.toDataURL("image/png").replace("image/png","image/octet-stream"),t=document.createElement("a");t.download="badger-badger-pfp-svg.png",t.href=e,t.click()},d.src="data:image/svg+xml;base64,"+btoa(i)}),["input","change"]))document.getElementById("x").addEventListener(t,function(e){window.badgerState.x=parseFloat(e.target.value),window.badgerState.MarkDirty()}),document.getElementById("y").addEventListener(t,function(e){window.badgerState.y=parseFloat(e.target.value),window.badgerState.MarkDirty()}),document.getElementById("u").addEventListener(t,function(e){window.badgerState.u=parseFloat(e.target.value),window.badgerState.MarkDirty()}),document.getElementById("v").addEventListener(t,function(e){window.badgerState.v=parseFloat(e.target.value),window.badgerState.MarkDirty()}),document.getElementById("pixel-radius").addEventListener(t,function(e){window.badgerState.pixelRadius=parseFloat(e.target.value),window.badgerState.MarkDirty()}),document.getElementById("normalized-radius").addEventListener(t,function(e){window.badgerState.normalizedRadius=parseFloat(e.target.value),window.badgerState.MarkDirty()}),document.getElementById("pixel-border").addEventListener(t,function(e){window.badgerState.pixelBorder=parseFloat(e.target.value),window.badgerState.MarkDirty()}),document.getElementById("normalized-border").addEventListener(t,function(e){window.badgerState.normalizedBorder=parseFloat(e.target.value),window.badgerState.MarkDirty()}),document.getElementById("badge-text").addEventListener(t,function(e){window.badgerState.badgeText=e.target.value,window.badgerState.MarkDirty()}),document.getElementById("pixel-font-size").addEventListener(t,function(e){window.badgerState.pixelFontSize=parseFloat(e.target.value),window.badgerState.MarkDirty()}),document.getElementById("normalized-font-size").addEventListener(t,function(e){window.badgerState.normalizedFontSize=parseFloat(e.target.value),window.badgerState.MarkDirty()}),document.getElementById("pixel-offset-x").addEventListener(t,function(e){window.badgerState.xTextOffset=parseFloat(e.target.value),window.badgerState.MarkDirty()}),document.getElementById("normalized-offset-u").addEventListener(t,function(e){window.badgerState.uTextOffset=parseFloat(e.target.value),window.badgerState.MarkDirty()}),document.getElementById("pixel-offset-y").addEventListener(t,function(e){window.badgerState.yTextOffset=parseFloat(e.target.value),window.badgerState.MarkDirty()}),document.getElementById("normalized-offset-v").addEventListener(t,function(e){window.badgerState.vTextOffset=parseFloat(e.target.value),window.badgerState.MarkDirty()}),document.getElementById("outline-overlay-roundness").addEventListener(t,function(e){window.badgerState.outlineRoundness=parseFloat(e.target.value),window.badgerState.MarkDirty()});document.getElementById("outline-overlay-roundness-server-default").addEventListener("click",function(e){window.badgerState.outlineRoundness=.66,window.badgerState.MarkDirty()}),document.getElementById("outline-overlay-roundness-user-default").addEventListener("click",function(e){window.badgerState.outlineRoundness=1,window.badgerState.MarkDirty()}),document.getElementById("lower-right").addEventListener("click",function(e){window.badgerState.u=1-21.25/128,window.badgerState.v=1-21/128,window.badgerState.MarkDirty()}),document.getElementById("lower-left").addEventListener("click",function(e){window.badgerState.u=21.25/128,window.badgerState.v=1-21/128,window.badgerState.MarkDirty()}),document.getElementById("upper-left").addEventListener("click",function(e){window.badgerState.u=21.25/128,window.badgerState.v=21/128,window.badgerState.MarkDirty()}),document.getElementById("upper-right").addEventListener("click",function(e){window.badgerState.u=1-21.25/128,window.badgerState.v=21/128,window.badgerState.MarkDirty()}),document.getElementById("lower-right-inner").addEventListener("click",function(e){window.badgerState.u=.5+Math.sqrt(2)/4-window.badgerState.normalizedRadius,window.badgerState.v=.5+Math.sqrt(2)/4-window.badgerState.normalizedRadius,window.badgerState.MarkDirty()}),document.getElementById("lower-left-inner").addEventListener("click",function(e){window.badgerState.u=.5-Math.sqrt(2)/4+window.badgerState.normalizedRadius,window.badgerState.v=.5+Math.sqrt(2)/4-window.badgerState.normalizedRadius,window.badgerState.MarkDirty()}),document.getElementById("upper-left-inner").addEventListener("click",function(e){window.badgerState.u=.5-Math.sqrt(2)/4+window.badgerState.normalizedRadius,window.badgerState.v=.5-Math.sqrt(2)/4+window.badgerState.normalizedRadius,window.badgerState.MarkDirty()}),document.getElementById("upper-right-inner").addEventListener("click",function(e){window.badgerState.u=.5+Math.sqrt(2)/4-window.badgerState.normalizedRadius,window.badgerState.v=.5-Math.sqrt(2)/4+window.badgerState.normalizedRadius,window.badgerState.MarkDirty()}),document.getElementById("default-radius").addEventListener("click",function(e){window.badgerState.normalizedRadius=21/128,window.badgerState.normalizedBorder=.25-21/128,window.badgerState.MarkDirty()}),document.getElementById("default-contents").addEventListener("click",function(e){window.badgerState.normalizedFontSize=30/128,window.badgerState.badgeText="1",window.badgerState.uTextOffset=0,window.badgerState.vTextOffset=0,window.badgerState.MarkDirty()}),document.getElementById("sample-server-pfp").addEventListener("click",async function(e){let i=await t(document.getElementById("sample-server-pfp-image"));window.badgerState.mainImage.src=URL.createObjectURL(i),window.badgerState.MarkDirty()}),document.getElementById("sample-server-pfp-overlay").addEventListener("click",async function(e){let i=await t(document.getElementById("sample-server-pfp-overlay-image"));window.badgerState.mainImage.src=URL.createObjectURL(i),window.badgerState.MarkDirty()}),document.getElementById("lower-right").click(),document.getElementById("default-radius").click(),document.getElementById("default-contents").click();
//# sourceMappingURL=index.58c99199.js.map
